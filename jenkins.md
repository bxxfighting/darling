### 有关Jenkins
> 最初被调用搭建devops系统时，关于jenkins的知识几乎为0.  
> 然后在网上查找各种文档真是像吃屎一样.  
> 因此，我不想有兄弟再走我的老路.  
> 在研究使用jenkins时，大概分成四个阶段，每一个阶段都算是一次大的变化.  

#### 第一阶段: Freestyle Project
> 也就是jenkins创建job的第一种形式，所有内容都通过jenkins页面上配置.  
> 一开始这么弄的时候，虽然是在界面上配置, 但是我就想，一定得弄成一个比较通用或者容易修改成其它job.  
> 查看python操作jenkins的库python-jenkins，发现job是通过xml配置文件创建.  
> 并且还有接口可以获取job的xml配置文件.  
> 那么我现在的思路就是，我弄一个模板的job，通过获取模板job的xml配置文件，并修改成对应服务的信息来创建其它job  

> 这里有一个比较有意思的事情，原本我想直接弄成一个job，然后通过传各种参数实现部署不同服务的.  
> 但是需求方说参数太多不想选，最后弄成多个job后，发现job太多了，一样不好选.  
> (但是这些都不是本质问题，根本原因是缺少一个自建的管理平台来管理这些东西)  

#### 第二阶段: 声明式pipeline
```
pipeline {
}
```
> 经过几天研究后，发现可以直接通过代码的形式创建job，这样更容易管理，修改起来更方便  
> 这时候把job按语言分成了几种，不同语言有自己对应的pipeline文件.  
> 然后仍然是每种语言创建一个模板job, 之后为不同服务通过第一阶段的方式创建对应的job  
> 虽然不同服务最后的job不同，但是相同语言的服务job其实使用的是相同的pipeline的文件  
> 因此，在有修改时，直接修改对应的pipeline文件，所有job就都生效了  
> 在使用声明式pipeline开始是挺好，但是后来要增加很多功能，声明式pipeline就出现很难处理的情况  

#### 第三阶段: 脚本式pipeline
```
node('') {
}
```
> 转变成脚本式后，写很多东西就很舒服了(其实跟声明式变化不大)  
> 最主要是好处就是变量使用上更容易、更舒服  

#### 第四阶段: 脚本式pipeline之功能分离
> 其实这个是我觉得从声明式转到脚本式后，最大的好处(可能声明式也行，但我确实没有找到用法)  
> 就是把不同功能，写到不同文件中，通过组合形成最后的pipeline  
> 比如，按之前不同语言对应不同的pipeline，但是他们之间又有相同的部分.  
> 就可以把相同的部分写到一个独立的文件中，如果要用就通过load来加载它.  
> 还有一个最重要的就是，如果有了自己的运维平台管理，那么，我们就可以不再需要每个服务使用独立的job  
> 这样可以把所有都合并成一个job，那么就有一个pipeline，在里面通过if等判断加载不同的功能.  
